<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Duck Hunt: src/Devices/kbc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Duck Hunt
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_27b17494125eb78195473abe004504ab.html">Devices</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">kbc.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="kbc_8h_source.html">../Include/kbc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="i8042_8h_source.html">../Include/i8042.h</a>&quot;</code><br />
<code>#include &lt;lcom/lcf.h&gt;</code><br />
<code>#include &lt;minix/sysutil.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for kbc.c:</div>
<div class="dyncontent">
<div class="center"><img src="kbc_8c__incl.png" border="0" usemap="#asrc_2_devices_2kbc_8c" alt=""/></div>
<map name="asrc_2_devices_2kbc_8c" id="asrc_2_devices_2kbc_8c">
<area shape="rect" title=" " alt="" coords="117,5,242,32"/>
<area shape="rect" href="kbc_8h.html" title=" " alt="" coords="5,80,116,107"/>
<area shape="rect" href="i8042_8h.html" title=" " alt="" coords="58,155,167,181"/>
<area shape="rect" title=" " alt="" coords="119,229,197,256"/>
<area shape="rect" title=" " alt="" coords="242,80,349,107"/>
</map>
</div>
</div>
<p><a href="kbc_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abf7e97dd9a8cfe7951fbd34b53a720e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kbc_8c.html#abf7e97dd9a8cfe7951fbd34b53a720e6">kbc_issue_command</a> (uint8_t cmd, int port)</td></tr>
<tr class="memdesc:abf7e97dd9a8cfe7951fbd34b53a720e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to issue an command to a specific port.  <a href="kbc_8c.html#abf7e97dd9a8cfe7951fbd34b53a720e6">More...</a><br /></td></tr>
<tr class="separator:abf7e97dd9a8cfe7951fbd34b53a720e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e0dcbc6f00b8e485e307b5589dd2c3c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kbc_8c.html#a3e0dcbc6f00b8e485e307b5589dd2c3c">kbc_read_outb</a> ()</td></tr>
<tr class="memdesc:a3e0dcbc6f00b8e485e307b5589dd2c3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to read the data from the KBC and pass it to the OUT BYTE. Checks if the input is full before reading, if it reads it reads to DATA. After it checks if there were any parity or timeout errors, if not passes the data information to the OUT_BYTE.  <a href="kbc_8c.html#a3e0dcbc6f00b8e485e307b5589dd2c3c">More...</a><br /></td></tr>
<tr class="separator:a3e0dcbc6f00b8e485e307b5589dd2c3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea970a154161a35f6894898a092ed70a"><td class="memItemLeft" align="right" valign="top">void()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kbc_8c.html#aea970a154161a35f6894898a092ed70a">kbc_ih</a> ()</td></tr>
<tr class="memdesc:aea970a154161a35f6894898a092ed70a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to check if there was any informationr read to the OUT BYTE. If not waits for a specified time before trying to read again.  <a href="kbc_8c.html#aea970a154161a35f6894898a092ed70a">More...</a><br /></td></tr>
<tr class="separator:aea970a154161a35f6894898a092ed70a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18c596b224bba98ca524a0bfa9730609"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kbc_8c.html#a18c596b224bba98ca524a0bfa9730609">kbc_subscribe_int</a> (uint8_t *bit_no)</td></tr>
<tr class="memdesc:a18c596b224bba98ca524a0bfa9730609"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to subscribe the kbc interrupts on exclusive mode.  <a href="kbc_8c.html#a18c596b224bba98ca524a0bfa9730609">More...</a><br /></td></tr>
<tr class="separator:a18c596b224bba98ca524a0bfa9730609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e945987c2233f1c30a645ec5fc750c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kbc_8c.html#a0e945987c2233f1c30a645ec5fc750c1">kbc_unsubscribe_int</a> ()</td></tr>
<tr class="memdesc:a0e945987c2233f1c30a645ec5fc750c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsubscribes the kbc interrupts.  <a href="kbc_8c.html#a0e945987c2233f1c30a645ec5fc750c1">More...</a><br /></td></tr>
<tr class="separator:a0e945987c2233f1c30a645ec5fc750c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae87fa6c999831cb82183e2293cb7b4c8"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kbc_8c.html#ae87fa6c999831cb82183e2293cb7b4c8">out_byte</a></td></tr>
<tr class="separator:ae87fa6c999831cb82183e2293cb7b4c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aea970a154161a35f6894898a092ed70a" name="aea970a154161a35f6894898a092ed70a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea970a154161a35f6894898a092ed70a">&#9670;&nbsp;</a></span>kbc_ih()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void() kbc_ih </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to check if there was any informationr read to the OUT BYTE. If not waits for a specified time before trying to read again. </p>

<p class="definition">Definition at line <a class="el" href="kbc_8c_source.html#l00057">57</a> of file <a class="el" href="kbc_8c_source.html">kbc.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="kbc_8c_aea970a154161a35f6894898a092ed70a_cgraph.png" border="0" usemap="#akbc_8c_aea970a154161a35f6894898a092ed70a_cgraph" alt=""/></div>
<map name="akbc_8c_aea970a154161a35f6894898a092ed70a_cgraph" id="akbc_8c_aea970a154161a35f6894898a092ed70a_cgraph">
<area shape="rect" title="Function to check if there was any informationr read to the OUT BYTE. If not waits for a specified ti..." alt="" coords="5,5,65,32"/>
<area shape="rect" href="kbc_8c.html#a3e0dcbc6f00b8e485e307b5589dd2c3c" title="Function to read the data from the KBC and pass it to the OUT BYTE. Checks if the input is full befor..." alt="" coords="113,5,220,32"/>
<area shape="rect" href="utils_8c.html#a79a031a8611f5b2d6afa4158e92b0fb4" title="Auxiliar function to extract a 32 bit number to a bit and pass that information converted into a 8 bi..." alt="" coords="268,5,359,32"/>
</map>
</div>

</div>
</div>
<a id="abf7e97dd9a8cfe7951fbd34b53a720e6" name="abf7e97dd9a8cfe7951fbd34b53a720e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf7e97dd9a8cfe7951fbd34b53a720e6">&#9670;&nbsp;</a></span>kbc_issue_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kbc_issue_command </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to issue an command to a specific port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>command </td></tr>
    <tr><td class="paramname">port</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if it was sucessful, 1 if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="kbc_8c_source.html#l00008">8</a> of file <a class="el" href="kbc_8c_source.html">kbc.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="kbc_8c_abf7e97dd9a8cfe7951fbd34b53a720e6_cgraph.png" border="0" usemap="#akbc_8c_abf7e97dd9a8cfe7951fbd34b53a720e6_cgraph" alt=""/></div>
<map name="akbc_8c_abf7e97dd9a8cfe7951fbd34b53a720e6_cgraph" id="akbc_8c_abf7e97dd9a8cfe7951fbd34b53a720e6_cgraph">
<area shape="rect" title="Function to issue an command to a specific port." alt="" coords="5,5,151,32"/>
<area shape="rect" href="utils_8c.html#a79a031a8611f5b2d6afa4158e92b0fb4" title="Auxiliar function to extract a 32 bit number to a bit and pass that information converted into a 8 bi..." alt="" coords="199,5,289,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="kbc_8c_abf7e97dd9a8cfe7951fbd34b53a720e6_icgraph.png" border="0" usemap="#akbc_8c_abf7e97dd9a8cfe7951fbd34b53a720e6_icgraph" alt=""/></div>
<map name="akbc_8c_abf7e97dd9a8cfe7951fbd34b53a720e6_icgraph" id="akbc_8c_abf7e97dd9a8cfe7951fbd34b53a720e6_icgraph">
<area shape="rect" title="Function to issue an command to a specific port." alt="" coords="220,5,365,32"/>
<area shape="rect" href="mouse_8c.html#aacdb4f83e9e64938ed351cf8016ad2bb" title="Function to disable mouse data reporting." alt="" coords="5,5,172,32"/>
</map>
</div>

</div>
</div>
<a id="a3e0dcbc6f00b8e485e307b5589dd2c3c" name="a3e0dcbc6f00b8e485e307b5589dd2c3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e0dcbc6f00b8e485e307b5589dd2c3c">&#9670;&nbsp;</a></span>kbc_read_outb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kbc_read_outb </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to read the data from the KBC and pass it to the OUT BYTE. Checks if the input is full before reading, if it reads it reads to DATA. After it checks if there were any parity or timeout errors, if not passes the data information to the OUT_BYTE. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if it was sucessful, 1 if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="kbc_8c_source.html#l00032">32</a> of file <a class="el" href="kbc_8c_source.html">kbc.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="kbc_8c_a3e0dcbc6f00b8e485e307b5589dd2c3c_cgraph.png" border="0" usemap="#akbc_8c_a3e0dcbc6f00b8e485e307b5589dd2c3c_cgraph" alt=""/></div>
<map name="akbc_8c_a3e0dcbc6f00b8e485e307b5589dd2c3c_cgraph" id="akbc_8c_a3e0dcbc6f00b8e485e307b5589dd2c3c_cgraph">
<area shape="rect" title="Function to read the data from the KBC and pass it to the OUT BYTE. Checks if the input is full befor..." alt="" coords="5,5,112,32"/>
<area shape="rect" href="utils_8c.html#a79a031a8611f5b2d6afa4158e92b0fb4" title="Auxiliar function to extract a 32 bit number to a bit and pass that information converted into a 8 bi..." alt="" coords="160,5,251,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="kbc_8c_a3e0dcbc6f00b8e485e307b5589dd2c3c_icgraph.png" border="0" usemap="#akbc_8c_a3e0dcbc6f00b8e485e307b5589dd2c3c_icgraph" alt=""/></div>
<map name="akbc_8c_a3e0dcbc6f00b8e485e307b5589dd2c3c_icgraph" id="akbc_8c_a3e0dcbc6f00b8e485e307b5589dd2c3c_icgraph">
<area shape="rect" title="Function to read the data from the KBC and pass it to the OUT BYTE. Checks if the input is full befor..." alt="" coords="132,31,239,57"/>
<area shape="rect" href="kbc_8c.html#aea970a154161a35f6894898a092ed70a" title="Function to check if there was any informationr read to the OUT BYTE. If not waits for a specified ti..." alt="" coords="15,5,75,32"/>
<area shape="rect" href="mouse_8c.html#a210374b50462acdedab00df64d5cea3c" title=" " alt="" coords="5,56,84,83"/>
</map>
</div>

</div>
</div>
<a id="a18c596b224bba98ca524a0bfa9730609" name="a18c596b224bba98ca524a0bfa9730609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18c596b224bba98ca524a0bfa9730609">&#9670;&nbsp;</a></span>kbc_subscribe_int()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kbc_subscribe_int </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>bit_no</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to subscribe the kbc interrupts on exclusive mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bit_no</td><td>Bit Number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if sucessful, otherwise 1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="kbc_8c_source.html#l00066">66</a> of file <a class="el" href="kbc_8c_source.html">kbc.c</a>.</p>

</div>
</div>
<a id="a0e945987c2233f1c30a645ec5fc750c1" name="a0e945987c2233f1c30a645ec5fc750c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e945987c2233f1c30a645ec5fc750c1">&#9670;&nbsp;</a></span>kbc_unsubscribe_int()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kbc_unsubscribe_int </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unsubscribes the kbc interrupts. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if sucessful, otherwise 1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="kbc_8c_source.html#l00076">76</a> of file <a class="el" href="kbc_8c_source.html">kbc.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae87fa6c999831cb82183e2293cb7b4c8" name="ae87fa6c999831cb82183e2293cb7b4c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae87fa6c999831cb82183e2293cb7b4c8">&#9670;&nbsp;</a></span>out_byte</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t out_byte</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="kbc_8c_source.html#l00030">30</a> of file <a class="el" href="kbc_8c_source.html">kbc.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
